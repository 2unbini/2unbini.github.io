---
title: "Union-Find in Swift (feat. ë¶„ë¦¬ ì§‘í•©)"
toc: true
toc_sticky: true
categories:
    - ğŸ“‚ all
    - swift
tags:
    - swift
    - ìŠ¤ìœ„í”„íŠ¸
    - ì•Œê³ ë¦¬ì¦˜
last_modified_at: 2023-01-31
---

## Union(í•©ì¹˜ê¸°)ê³¼ Find(ì°¾ê¸°)í•  ìˆ˜ ìˆëŠ” ì•Œê³ ë¦¬ì¦˜

Unionê³¼ Findë§Œ ìœ ì˜ë¯¸í•˜ê²Œ ì •ì˜í•˜ê³  ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì•Œê³ ë¦¬ì¦˜ ë° ìë£Œêµ¬ì¡°ê°€ ìˆë‹¤.

### ë¶„ë¦¬ ì§‘í•©

êµì§‘í•©ì´ ì—†ëŠ” ë‘ ì§‘í•©ì„ ë¶„ë¦¬ ì§‘í•©ì´ë¼ê³  í•œë‹¤.

êµì§‘í•©ì´ ì—†ëŠ” ì§‘í•©ì€ ë¬´ì˜ë¯¸í•´ë³´ì¸ë‹¤. ê·¸ëŸ¬ë‚˜ ì–´ë–¤ ì›ì†Œê°€ ë‘ ì§‘í•© ì¤‘ ì–´ë–¤ ì§‘í•©ì— ì†í•´ìˆëŠ”ì§€ ì•Œê³  ì‹¶ì„ ë• ê° ì§‘í•©ì´ ìœ ì˜ë¯¸í•˜ë‹¤.

ë˜, ë‘ ì§‘í•©ì„ í•©ì³ ë™ì¼í•œ ì§‘í•©ìœ¼ë¡œ ë§Œë“¤ì–´ë‚´ëŠ” ì—°ì‚°ì„ ì •ì˜í•  ìˆ˜ ìˆë‹¤.

### union-find

ì¦‰, ì´ë¦„ì—ì„œ ì•Œ ìˆ˜ ìˆë“¯, Union(í•©ì§‘í•©)ê³¼ Find(ì§‘í•© ì°¾ê¸°)ë¥¼ ì •ì˜í•˜ëŠ” ê²ƒì´ ì´ ì•Œê³ ë¦¬ì¦˜ì˜ ë‚´ìš©ì´ë‹¤.

```markdown
     A             B
+---   ---+   +---   ---+
|  1   2  |   |  5   6  |
|    3    |   |         |
+---------+   +---------+
```

1, 2, 3ì„ ì›ì†Œë¡œ ê°–ëŠ” ì§‘í•© Aì™€ 5, 6ì„ ì›ì†Œë¡œ ê°–ëŠ” ì§‘í•© Bê°€ ìˆë‹¤.

1. Find

find(5)ë¥¼ í•˜ë©´ Bë¥¼, find(2)ë¥¼ í•˜ë©´ Aë¥¼ ë„ì¶œí•˜ë„ë¡ `find` í•¨ìˆ˜ë¥¼ ì •ì˜í•œë‹¤.

2. Union

A U B ì˜ ê°’ì€ 1, 2, 3, 4, 5ê°€ ëœë‹¤. ì´ ë•Œ, ì´ í•©ì§‘í•©ì˜ ì§‘í•©ì„ Aë¼ê³  í•œë‹¤.

ì¦‰, union(B, to: A)ë¥¼ í•˜ë©´ Aë¥¼ ë„ì¶œí•˜ë„ë¡ `union` í•¨ìˆ˜ë¥¼ ì •ì˜í•œë‹¤.

ì—¬ê¸°ì„œ ì§‘í•© A, BëŠ” í¸ì˜ìƒ ë‚˜íƒ€ë‚¸ ì§‘í•© ì´ë¦„ì´ê³ , union-find ì•Œê³ ë¦¬ì¦˜ì„ ì •ì˜í•˜ê³  ì‚¬ìš©í•  ë•Œì—” `ì§‘í•© ì´ë¦„(=ë¶€ëª¨ ë…¸ë“œ)ì„ ê°€ì§„ ë°°ì—´`ì„ ì •ì˜í•´ ì‚¬ìš©í•œë‹¤.


## êµ¬í˜„

ë­ë¼ëŠ”ê²¨? ì‹¶ë‹¤ë©´ êµ¬í˜„ì„ í•´ ë³´ì. (ë‚˜ë„ ì²˜ìŒì—” ë­ë¼ëŠ”ê²¨? ì‹¶ì—ˆë‹¤...)

### ì§‘í•© ë°°ì—´ ì´ˆê¸°í™”

ë¨¼ì € íŠ¹ì • ì›ì†Œì˜ ì§‘í•© ì´ë¦„ì„ ê°€ì§„ ë°°ì—´ì„ ì •ì˜í•œë‹¤.

```swift

var parent: [Int] = []

for node in 0...5 {
    parent.append(node)
}

// node
// [0, 1, 2, 3, 4, 5]
// parent[0] = 0
// parent[1] = 1
// ...
// parent[5] = 5

```

ì´ë ‡ê²Œ í•˜ë©´ ì›ì†Œ ìê¸° ìì‹ ì´ ìê¸° ìì‹ ì˜ ì§‘í•©ì´ ëœë‹¤.

### find

ì›ì†Œì˜ ì§‘í•©ì„ ì°¾ëŠ” í•¨ìˆ˜ë¥¼ ì •ì˜í•œë‹¤.

```swift
func find(_ node: Int) -> Int {
    if parent[node] == node {
        return node
    }
}
```

ì›ì†Œì˜ ì§‘í•©ì´ ì›ì†Œ ìì‹ ê³¼ ê°™ìœ¼ë©´, ìœ„ì— ì´ˆê¸°í™”í•œëŒ€ë¡œ ì›ì†Œ ìê¸° ìì‹ ì´ ìê¸° ìì‹ ì˜ ì§‘í•©ì´ ëœë‹¤.

ë‹¤ë¥´ë‹¤ë©´?

```swift
func find(_ node: Int) -> Int {
    if parent[node] == node {
        return node
    }

    return find(parent[node])
}
```

ì›ì†Œ ìê¸° ìì‹ ì´ ì§‘í•©ì¼ë•Œê¹Œì§€ ì­‰ íŒŒê³ ë“¤ì–´ê°„ë‹¤.

ê·¸ëŸ°ë° ì´ë ‡ê²Œ í•˜ë©´ ìµœì•…ì˜ ê²½ìš° O(n)ë§Œí¼ parent ë°°ì—´ì„ íƒìƒ‰í•´ì•¼ í•œë‹¤. íƒìƒ‰ íšŸìˆ˜ë¥¼ ì¤„ì´ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì´ë‹ˆë§Œí¼ find í•¨ìˆ˜ë¥¼ ì´ë ‡ê²Œ ë‹¤ë“¬ì„ ìˆ˜ ìˆë‹¤.

```swift
func find(_ node: Int) -> Int {
    if parent[node] == node {
        return node
    }

    parent[node] = find(parent[node])
    return parent[node]
}
```

ì¬ê·€ì ìœ¼ë¡œ íƒ€ê³ ë‚´ë ¤ê°€ê¸´ í•˜ë”ë¼ë„, í•œ ë²ˆ íƒ€ê³ ë‚´ë ¤ê°„ nodeì— ëŒ€í•´ì„  ê·¸ ì§‘í•©ì˜ ê°’ì„ ê°€ì¥ ìƒìœ„ ì§‘í•©ì˜ ê°’ìœ¼ë¡œ ì¹˜í™˜í•´ì£¼ëŠ” ê²ƒì´ë‹¤.

```markdown
1
ã„´ 2
   ã„´ 3
      ã„´ 4
         ã„´ 5
```

ì¸ ê²½ìš°ì—, parent[5]ëŠ” 4ê³ , parent[4]ëŠ” 3, ..., parent[2]ëŠ” 1ì´ ëœë‹¤.

parent[5]ë¥¼ find í•¨ìˆ˜ë¥¼ ì¬ê·€ì ìœ¼ë¡œ íƒ€ê³  ë‚´ë ¤ê°€ë©´ì„œ ì°¾ì„ ìˆ˜ë„ ìˆì§€ë§Œ, parent[5] = 1ë¡œ ì¹˜í™˜í•´ ë°”ë¡œ find(1)ì„ í˜¸ì¶œí•´ ìµœìƒìœ„ ì§‘í•©ì„ ë°”ë¡œ ì•Œì•„ë‚¼ ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.

### union

ì§‘í•©ì„ ì°¾ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“¤ì—ˆìœ¼ë‹ˆ í•©ì§‘í•© ì—°ì‚°ì„ í•˜ëŠ” í•¨ìˆ˜ë„ ë§Œë“¤ì–´ë³´ì.

```swift
func union(_ num2: Int, to num1: Int) {
    let set1 = parent[num1]
    let set2 = parent[num2]

    parent[set2] = set1
}
```

í•©ì§‘í•©ì´ ë  ì›ì†Œë¥¼ num1, num1 ì§‘í•©ì— í¬í•¨ì‹œí‚¬ ì›ì†Œë¥¼ num2ë¼ê³  í•˜ì. set1ì€ num1ì˜ ì§‘í•©, set2ëŠ” num2ì˜ ì§‘í•©ì´ë‹¤.

set2ì˜ ì§‘í•©ì— set1ì„ ëŒ€ì…í•´ì£¼ë©´ ëœë‹¤.

```markdown
// parent[i]
//    |
//    i      ì˜ êµ¬ì¡°

1    2    3    4    5
|    |    |    |    |
1    2    3    4    5

```

ì˜ ì˜ˆì‹œì—ì„œ, union(3, to: 2)ë¥¼ í•˜ë©´

parent[3] = 2

ê°€ ë˜ê³ , ì´ëŠ” ë‹¤ìŒê³¼ ê°™ì€ êµ¬ì¡°ë¡œ ë°”ë€Œê²Œ ëœë‹¤.

```markdown
// parent[i]
//    |
//    i      ì˜ êµ¬ì¡°

1    2    2    4    5
|    |    |    |    |
1    2    3    4    5

// ì¦‰,

1       2       4    5
|    +--|--+    |    |
|    |     |    |    |
1    2     3    4    5

```

## ì˜ˆì‹œ ë¬¸ì œ

ì–´ë–¤ ì•Œê³ ë¦¬ì¦˜ ë¬¸ì œ ì±…ì— ì†Œê°œë˜ì–´ìˆëŠ”ì§€ union-find ì•Œê³ ë¦¬ì¦˜ì„ ê²€ìƒ‰í•˜ìë§ˆì ë‚˜ì˜¤ëŠ” ëŒ€í‘œì ì¸ ë°±ì¤€ ë¬¸ì œê°€ ìˆë‹¤.

### [10775 ê³µí•­](https://www.acmicpc.net/problem/10775)

1, 2, 3, ... , G ì´ G ê°œì˜ ê²Œì´íŠ¸ê°€ ìˆëŠ” ê³µí•­ì´ ìˆë‹¤.

ì´ ê³µí•­ì˜ ê° ê²Œì´íŠ¸ì—ëŠ” í•˜ë‚˜ì˜ ë¹„í–‰ê¸°ë§Œ ë„í‚¹í•  ìˆ˜ ìˆê³ , ì…ë ¥ìœ¼ë¡œ ë“¤ì–´ì˜¨ g(i) ë¹„í–‰ê¸°ëŠ” i ì´í•˜ì˜ ê²Œì´íŠ¸ì— ë„í‚¹ë  ìˆ˜ ìˆë‹¤. ê²Œì´íŠ¸ì— ë„í‚¹í•  ìˆ˜ ì—†ëŠ” ê²½ìš° ê³µí•­ì´ íì‡„ëœë‹¤.

ì´ ë•Œ, ë„í‚¹í•  ìˆ˜ ìˆëŠ” ë¹„í–‰ê¸°ì˜ ìµœëŒ€ê°’ì„ êµ¬í•˜ëŠ” ë¬¸ì œë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ 1, 2, 3, 4, 5 ê²Œì´íŠ¸ê°€ ìˆì„ ë•Œ, ì²« ì…ë ¥ìœ¼ë¡œ 2ê°€ ë“¤ì–´ì™”ë‹¤ë©´, 2ë²ˆ ê²Œì´íŠ¸ì— ë¹„í–‰ê¸°ë¥¼ ë„í‚¹í•œë‹¤. ë‹¤ìŒ ì…ë ¥ìœ¼ë¡œ 2ê°€ ë“¤ì–´ì™”ë‹¤ë©´, 1ë²ˆ ê²Œì´íŠ¸ì— ë¹„í–‰ê¸°ë¥¼ ë„í‚¹í•œë‹¤. ë‹¤ìŒ ì…ë ¥ìœ¼ë¡œ ë˜ 2ê°€ ë“¤ì–´ì™”ë‹¤ë©´, 2 ì´í•˜ì˜ ê²Œì´íŠ¸ ì¤‘ ë„í‚¹í•  ìˆ˜ ìˆëŠ” ê²Œì´íŠ¸ê°€ ì—†ìœ¼ë¯€ë¡œ ê³µí•­ì´ íì‡„ëœë‹¤.

ì´ íë¦„ëŒ€ë¡œ Union-Findë¥¼ í™œìš©í•˜ë©´ `parent`(ì•„ë˜ ì½”ë“œì—ì„  gate)ê°€ 0ì´ ë˜ì–´ ë„í‚¹ ì‹¤íŒ¨, ê³µí•­ íì‡„ê°€ ë  ë•Œê¹Œì§€ ë¹„í–‰ê¸°ì˜ ê°œìˆ˜ë¥¼ ì„¸ì–´ ì£¼ë©´ ëœë‹¤.

```swift
let G = Int(readLine()!)!
let P = Int(readLine()!)!
var gate: [Int] = []
var input: [Int] = []
var count: Int = 0

// gateNumberì— ëŒ€í•œ gate ì§‘í•© ì´ˆê¸°í™”
for gateNumber in 0...P+1 {
    gate.append(gateNumber)
}

// ì…ë ¥ë°›ê¸°
for _ in 1...P {
    input.append(Int(readLine()!)!)
}

// num2ì˜ ì§‘í•©ì„ num1ì˜ ì§‘í•©ìœ¼ë¡œ í•©ì¹˜ëŠ” union í•¨ìˆ˜ ì •ì˜
func union(_ num2: Int, to num1: Int) {
    let set1 = find(num1)
    let set2 = find(num2)
    
    gate[set2] = set1
}

// numì˜ ì§‘í•© ì°¾ëŠ” find í•¨ìˆ˜ ì •ì˜
func find(_ num: Int) -> Int {
    if gate[num] == num {
        return num
    }
    
    gate[num] = find(gate[num])
    return gate[num]
}

// ì…ë ¥ ìˆœíšŒ
for number in input {
    
    // ì…ë ¥ëœ ê²Œì´íŠ¸ì˜ ì§‘í•©
    let gateNum = find(number)
    
    // ê²Œì´íŠ¸ì˜ ì§‘í•©ì´ 0ì´ë©´ ë”ì´ìƒ ë„í‚¹ ë¶ˆê°€
    // 0ì´ ì•„ë‹ˆë©´ í˜„ì¬ ê²Œì´íŠ¸ë³´ë‹¤ 1 ì‘ì€ ê²Œì´íŠ¸ì˜ ì§‘í•©ìœ¼ë¡œ í•©ì¹˜ê¸°
    if gateNum != 0 {
        union(gateNum, to: gateNum - 1)
        count += 1
    } else {
        break
    }
}

// ìµœëŒ€ ë¹„í–‰ê¸° ê°œìˆ˜ ë„ì¶œ
print(count)
```


## ì°¸ê³ 

[ì´ê²ƒì´ ìë£Œêµ¬ì¡°+ì•Œê³ ë¦¬ì¦˜ì´ë‹¤ with Cì–¸ì–´ - ë°•ìƒí˜„, í•œë¹›ë¯¸ë””ì–´](https://m.hanbit.co.kr/media/books/book_view.html?p_code=B9034896671)

[10775ë²ˆ ì§ˆë¬¸ì˜ ë‹µë³€](https://www.acmicpc.net/board/view/55692)